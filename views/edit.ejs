<%- include('./partials/header')%>
<body>
  <%- include('./partials/flasher')%>
  <%- include('./partials/navbar')%>

  <link rel="stylesheet" href="/cssfiles/edit.css">


  <div class="box2">
    <div class="container">
      <form action="/foodposts/<%= singleFoodPost._id %>?_method=PUT" method = "POST" class="validated-form" enctype="multipart/form-data">
        <div class = "row">
          <div class = "col-6">
            <div class="top">
                <header><strong>Update Post</strong></header>
            </div>
    
            <div class="input-field">
                <input type="text" class="input2" name = "foodpost[name]" placeholder="Name" value = "<%= singleFoodPost.name%>" required>
                <i class='bx bx-user' ></i>
            </div>

            <div class="input-field">
              <input type="text" class="input2" name = "foodpost[price]" placeholder="Price" value = "<%= singleFoodPost.price%>" required>
              <i class='bx bx-dollar' ></i>
            </div>

            <div class="input-field">
              <input type="text" class="input2" name = "foodpost[location]" placeholder="Location" value = "<%= singleFoodPost.location%>" required>
              <i class='bx bx-pin ' ></i>
            </div>

            <div class="input-field">
              <textarea class = "input3" cols="50" rows="10" name = "foodpost[description]"  placeholder="Description" required><%= singleFoodPost.description%></textarea>
              <i class='bx bx-text' id = "descriptionItag"></i>
            </div>

            <br>
            <div class = "container1">
              <div class = "row">
                
                <div class = "col-6 pl-0">
                  <select id="rating" name="foodpost[rating]" class = "mt-3 pt-1 pb-1 pl-1 pr-1" required>
                    <option selected disabled>Choose A Rating</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                  </select>

                </div>  
                
                <div class = "col-4 ml-4">
                  <input type="file" name="image" id="file" multiple>
                  <label for="file">
                    Choose a photo <i class='bx bx-paperclip' ></i>
                  </label>

                </div>
                
                
              </div>
            </div>
            <br>
            <div class="input-field">
              <input type="submit" class="submit" value="Update Post" id="firstButton">
            </div>

        
        
          </div>
          <div class = "col-6">
            <div id="foodpostCarousel" class="carousel" data-ride="carousel" data-interval="false">
              <div class="carousel-inner">
                  <% for (var x = 0; x < singleFoodPost.images.length ; x++){ %>
                      <% if(x==0){ %>
                          <div class="carousel-item active">
                              <img src="<%= singleFoodPost.images[x].url %>" class="d-block w-100 h-50" alt="...">
                              <div class = "container2">
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name = "deletedImages[]" value="<%= singleFoodPost.images[x].fileName %>" id="flexCheck-<%= x %>">
                                  <label class="form-check-label" for="flexCheck-<%= x %>">
                                    Delete?
                                  </label>
                                </div>
                              </div>
                              
                          </div>
                      <% }else{ %>
                          <div class="carousel-item">
                              <img src="<%= singleFoodPost.images[x].url %>" class="d-block w-100 h-50" alt="...">
                              <div class = "container2">
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name = "deletedImages[]" value="<%= singleFoodPost.images[x].fileName %>" id="flexCheck-<%= x %>">
                                  <label class="form-check-label" for="flexCheck-<%= x %>">
                                    Delete?
                                  </label>
                                </div>
                              </div>
                              
                          </div>
                      <%}%>
                  <%} %>
           
              </div>
              <% if(singleFoodPost.images.length > 1) {%>
              <a class="carousel-control-prev" href="#foodpostCarousel" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#foodpostCarousel" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
              </a>
              <% } %>
            </div>
          </div>
        </div>
        
      </form>
      <br>
    </div>

</div> 


<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
    integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
    crossorigin="anonymous"></script>
</body>
</html>




 